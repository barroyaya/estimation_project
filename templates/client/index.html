{# template/client/index.html #}
{% extends 'base.html' %}

{% block title %}Accueil - Système d'Estimation{% endblock %}

{% block extra_css %}
<style>
    /* Palette locale (remplace le violet) */
    :root{
        --primary-500:#3C5FA4;   /* bleu de l'image */
        --primary-600:#33518B;   /* plus sombre */
        --primary-400:#456DBD;   /* plus clair */
        --primary-gradient: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-500) 55%, var(--primary-400) 100%);
    }

    .hero-section {
        position: relative;
        background: var(--primary-gradient); /* plus de violet ici */
        border-radius: var(--radius-xl);
        overflow: hidden;
        min-height: 400px;
        display: flex;
        align-items: center;
        margin-bottom: 3rem;
    }

    .hero-section::before {
        content: '';
        position: absolute; inset: 0;
        /* ripple claire sur le bas, teinte bleue */
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="rgba(255,255,255,0.12)"><polygon points="1000,100 1000,0 0,0 0,80 200,100 400,20 600,80 800,10 1000,50"/></svg>');
        background-size: cover; background-position: bottom;
    }

    .hero-content {
        position: relative; z-index: 2;
        color: #fff; text-align: center; padding: 3rem 2rem;
    }

    .hero-title {
        font-size: 3.5rem; font-weight: 700; margin-bottom: 1.5rem;
        text-shadow: 0 4px 20px rgba(0,0,0,0.30);
        animation: slideInUp 1s ease-out;
    }

    .hero-subtitle {
        font-size: 1.4rem; font-weight: 300; margin-bottom: 2rem; opacity: 0.95;
        animation: slideInUp 1s ease-out .2s both;
    }

    .hero-description {
        font-size: 1.1rem; opacity: .9; margin-bottom: 2.5rem;
        max-width: 600px; margin-left: auto; margin-right: auto;
        animation: slideInUp 1s ease-out .4s both;
    }

    .hero-cta { animation: slideInUp 1s ease-out .6s both; }

    .hero-cta .btn {
        font-size: 1.2rem; padding: 1rem 2.5rem;
        background: rgba(255,255,255,.20);
        border: 2px solid rgba(255,255,255,.30);
        backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
        color: #fff; font-weight: 600; text-transform: uppercase; letter-spacing: .05em;
        transition: all .4s ease;
    }
    .hero-cta .btn:hover {
        background: rgba(255,255,255,.92);
        color: var(--primary-500);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 15px 30px rgba(0,0,0,.20);
    }

    .stats-section { margin-bottom: 4rem; }

    .stat-card {
        background: rgba(255,255,255,.9);
        backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255,255,255,.3);
        border-radius: var(--radius-xl);
        padding: 2.5rem 1.5rem; text-align: center;
        transition: all .4s cubic-bezier(.4,0,.2,1);
        position: relative; overflow: hidden; height: 100%;
    }

    .stat-card::before {
        content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
        background: var(--primary-gradient); transform: scaleX(0); transition: transform .4s ease;
    }
    .stat-card:hover::before { transform: scaleX(1); }

    .stat-card:hover {
        transform: translateY(-15px) scale(1.03);
        box-shadow: 0 25px 50px rgba(60,95,164,.22); /* bleu, pas violet */
        background: rgba(255,255,255,.95);
    }

    .stat-icon {
        font-size: 3.5rem; margin-bottom: 1.5rem;
        background: var(--primary-gradient);
        -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
        transition: all .4s ease;
    }
    .stat-card:hover .stat-icon { transform: scale(1.1) rotate(5deg); }

    .stat-number {
        font-size: 2.8rem; font-weight: 700; color: var(--text-primary);
        margin-bottom: .5rem; transition: all .4s ease;
    }
    .stat-card:hover .stat-number {
        background: var(--primary-gradient);
        -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
    }

    .stat-label {
        font-size: 1.1rem; color: var(--text-secondary); font-weight: 500;
        text-transform: uppercase; letter-spacing: .05em;
    }

    .features-section { margin-bottom: 4rem; }

    .section-title { text-align: center; margin-bottom: 3rem; position: relative; }
    .section-title h2 { font-size: 2.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 1rem; }
    .section-title::after {
        content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%);
        width: 100px; height: 4px; background: var(--primary-gradient); border-radius: 2px;
    }

    .feature-card {
        background: rgba(255,255,255,.9);
        backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255,255,255,.3);
        border-radius: var(--radius-lg);
        padding: 2rem; height: 100%;
        transition: all .4s cubic-bezier(.4,0,.2,1);
        position: relative; overflow: hidden;
    }
    .feature-card::before{
        content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
        background: linear-gradient(90deg, transparent, rgba(60,95,164,.10), transparent);
        transition: all .6s ease;
    }
    .feature-card:hover::before{ left:100% }
    .feature-card:hover{
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px rgba(60,95,164,.18);
        background: rgba(255,255,255,.95);
    }

    .feature-icon{
        width:80px; height:80px; border-radius:50%;
        display:flex; align-items:center; justify-content:center;
        margin:0 auto 1.5rem; font-size:2rem; color:#fff;
        transition: all .4s ease; position: relative; overflow: hidden;
    }
    .feature-icon.primary{ background: var(--primary-gradient) }
    .feature-icon.danger{ background: var(--danger-gradient) }
    .feature-icon.info{ background: var(--success-gradient) }
    .feature-icon.success{ background: var(--warning-gradient); color: var(--text-primary) }
    .feature-card:hover .feature-icon{ transform: scale(1.1) rotate(360deg) }

    .feature-title{ font-size:1.3rem; font-weight:600; color:var(--text-primary); margin-bottom:1rem; text-align:center }
    .feature-description{ color:var(--text-secondary); text-align:center; line-height:1.6; font-size:.95rem }

    .floating-elements{ position:absolute; inset:0; overflow:hidden; pointer-events:none; z-index:1 }
    .floating-element{
        position:absolute; width:20px; height:20px; background: rgba(255,255,255,.12);
        border-radius:50%; animation: float 6s ease-in-out infinite;
    }
    .floating-element:nth-child(1){ top:20%; left:10%; animation-delay:0s }
    .floating-element:nth-child(2){ top:60%; left:80%; animation-delay:2s }
    .floating-element:nth-child(3){ top:80%; left:20%; animation-delay:4s }

    @keyframes slideInUp{ from{opacity:0; transform:translateY(30px)} to{opacity:1; transform:translateY(0)} }
    @keyframes float{ 0%,100%{transform:translateY(0) rotate(0)} 50%{transform:translateY(-20px) rotate(180deg)} }

    .pulse{ animation: pulse 2s infinite }
    @keyframes pulse{
        0% { box-shadow: 0 0 0 0 rgba(60,95,164,.7) }
        70%{ box-shadow: 0 0 0 10px rgba(60,95,164,0) }
        100%{ box-shadow: 0 0 0 0 rgba(60,95,164,0) }
    }

    @media (max-width: 768px){
        .hero-title{ font-size: 2.5rem }
        .hero-subtitle{ font-size:1.2rem }
        .stat-card, .feature-card{ margin-bottom:2rem }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
    <div class="floating-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>
    <div class="hero-content w-100">
        <h1 class="hero-title">Système d'Estimation Avancé</h1>
        <p class="hero-subtitle">Révolutionnez vos estimations de projets industriels</p>
        <p class="hero-description">
            Créez et gérez vos estimations avec précision grâce à notre plateforme intuitive.
            Sélectionnez vos matériaux, main d'œuvre et services pour générer automatiquement vos devis professionnels.
        </p>
        <div class="hero-cta">
            <a class="btn pulse" href="{% url 'project_selection' %}" role="button">
                <i class="fas fa-rocket me-2"></i> Démarrer un Projet
            </a>
        </div>
    </div>
</div>

<!-- Statistiques -->
<div class="stats-section">
  <div class="row g-4">
    <div class="col-md-4 col-sm-6">
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-project-diagram"></i></div>
        <div class="stat-number" data-count="{{ stats.projets|default:0 }}">0</div>
        <div class="stat-label">Projets Actifs</div>
      </div>
    </div>

    <div class="col-md-4 col-sm-6">
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-layer-group"></i></div>
        <div class="stat-number" data-count="{{ stats.categories|default:0 }}">0</div>
        <div class="stat-label">Catégories</div>
      </div>
    </div>

    <div class="col-md-4 col-sm-6">
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-tools"></i></div>
        <div class="stat-number" data-count="{{ stats.elements|default:0 }}">0</div>
        <div class="stat-label">Éléments</div>
      </div>
    </div>
  </div>
</div>


<!-- Fonctionnalités -->
<div class="features-section">
    <div class="section-title">
        <h2>Fonctionnalités Avancées</h2>
        <p class="text-muted">Découvrez les outils qui font la différence</p>
    </div>

    <div class="row g-4">
        <div class="col-lg-3 col-md-6">
            <div class="feature-card">
                <div class="feature-icon primary"><i class="fas fa-calculator"></i></div>
                <h5 class="feature-title">Calcul Intelligent</h5>
                <p class="feature-description">
                    Algorithmes avancés pour des calculs précis et automatiques selon vos sélections et paramètres.
                </p>
            </div>
        </div>

        <div class="col-lg-3 col-md-6">
            <div class="feature-card">
                <div class="feature-icon danger"><i class="fas fa-file-pdf"></i></div>
                <h5 class="feature-title">Rapports Professionnels</h5>
                <p class="feature-description">
                    Générez instantanément des rapports détaillés au format PDF avec votre branding personnalisé.
                </p>
            </div>
        </div>

        <div class="col-lg-3 col-md-6">
            <div class="feature-card">
                <div class="feature-icon info"><i class="fas fa-search-plus"></i></div>
                <h5 class="feature-title">Recherche Intelligente</h5>
                <p class="feature-description">
                    Trouvez instantanément les éléments recherchés grâce à notre système de recherche avancé.
                </p>
            </div>
        </div>

        <div class="col-lg-3 col-md-6">
            <div class="feature-card">
                <div class="feature-icon success"><i class="fas fa-sync-alt"></i></div>
                <h5 class="feature-title">Mise à Jour Temps Réel</h5>
                <p class="feature-description">
                    Vos prix et données sont synchronisés en temps réel avec la base de données centrale.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Call to Action Section -->
<div class="row">
    <div class="col-12">
        <div class="card glass-card text-center py-5">
            <div class="card-body">
                <h3 class="mb-4">Prêt à commencer votre estimation ?</h3>
                <p class="text-muted mb-4">Rejoignez des milliers de professionnels qui font confiance à notre plateforme</p>
                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <a href="{% url 'project_selection' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-plus-circle me-2"></i> Nouveau Projet
                    </a>
                    <a href="#" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-play-circle me-2"></i> Voir la Démo
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animation des compteurs
    const counters = document.querySelectorAll('.stat-number');
    const animateCounter = (counter) => {
        const target = parseInt(counter.getAttribute('data-count') || '0', 10);
        if (isNaN(target) || target <= 0) { counter.textContent = 0; return; }
        const steps = 50, inc = Math.max(1, Math.floor(target/steps));
        let current = 0;
        const timer = setInterval(() => {
            current += inc;
            counter.textContent = Math.min(current, target);
            if (current >= target) clearInterval(timer);
        }, 30);
    };

    // Observer pour déclencher l'animation à l'apparition
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counter = entry.target.querySelector('.stat-number');
                if (counter && !counter.classList.contains('animated')) {
                    counter.classList.add('animated');
                    animateCounter(counter);
                }
            }
        });
    }, { threshold: 0.5 });

    document.querySelectorAll('.stat-card').forEach(card => observer.observe(card));

    // Effet de parallaxe léger sur les éléments flottants
    window.addEventListener('scroll', function() {
        const sy = window.pageYOffset;
        document.querySelectorAll('.floating-element').forEach((el, i) => {
            const speed = (i + 1) * 0.5;
            el.style.transform = `translateY(${sy * -0.5 * speed}px)`;
        });
    });
});
</script>
{% endblock %}
